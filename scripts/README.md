# åç«¯æ•°æ®æœåŠ¡ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [æ¶æ„è¯´æ˜](#æ¶æ„è¯´æ˜)
2. [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
3. [å®šæ—¶ä»»åŠ¡é…ç½®](#å®šæ—¶ä»»åŠ¡é…ç½®)
4. [æœ¬åœ°æµ‹è¯•](#æœ¬åœ°æµ‹è¯•)
5. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### **æ•°æ®æµç¨‹**

```
çˆ¬è™«è„šæœ¬ â†’ Supabase æ•°æ®åº“ â†’ Next.js API â†’ å‰ç«¯å±•ç¤º
```

1. **çˆ¬è™«è„šæœ¬**ï¼ˆ`news-crawler.js`ï¼‰
   - æŠ“å– 8 ä¸ªå¹³å°çš„çƒ­ç‚¹æ–°é—»
   - æ”¯æŒï¼šç™¾åº¦ã€36æ°ªã€ä»Šæ—¥å¤´æ¡ã€æŠ–éŸ³ã€å¾®åšã€çŸ¥ä¹ã€Bç«™ã€å°çº¢ä¹¦

2. **å®šæ—¶ä»»åŠ¡**ï¼ˆ`crawl-and-save-daily.js`ï¼‰
   - æ¯å¤© 0 ç‚¹è‡ªåŠ¨æ‰§è¡Œ
   - æ¸…ç†æ—§æ•°æ® â†’ æŠ“å–æ–°æ•°æ® â†’ å­˜å…¥æ•°æ®åº“

3. **æ•°æ®åº“**ï¼ˆSupabase PostgreSQLï¼‰
   - `platforms` è¡¨ï¼šå¹³å°ä¿¡æ¯
   - `hot_news` è¡¨ï¼šçƒ­ç‚¹æ–°é—»

4. **API æ¥å£**ï¼ˆ`/api/hot-news`ï¼‰
   - å‰ç«¯è°ƒç”¨è·å–æœ€æ–°æ•°æ®
   - è‡ªåŠ¨æ ¼å¼åŒ–è¿”å›

---

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### **æ­¥éª¤ 1ï¼šåˆ›å»º Supabase é¡¹ç›®**

1. è®¿é—® [https://supabase.com](https://supabase.com)
2. åˆ›å»ºæ–°é¡¹ç›®
3. è®°å½•ï¼š
   - `SUPABASE_URL`
   - `SUPABASE_ANON_KEY`

### **æ­¥éª¤ 2ï¼šæ‰§è¡Œ SQL è„šæœ¬**

åœ¨ Supabase Dashboard > SQL Editor ä¸­æ‰§è¡Œï¼š

```bash
cat scripts/setup-database.sql
```

å¤åˆ¶å†…å®¹å¹¶æ‰§è¡Œï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼š
- âœ… `platforms` è¡¨
- âœ… `hot_news` è¡¨
- âœ… ç´¢å¼•å’Œåˆå§‹æ•°æ®

### **æ­¥éª¤ 3ï¼šéªŒè¯è¡¨ç»“æ„**

åœ¨ Supabase Dashboard > Table Editor ä¸­æ£€æŸ¥ï¼š
- `platforms` è¡¨åº”è¯¥æœ‰ 8 æ¡è®°å½•
- `hot_news` è¡¨åˆå§‹ä¸ºç©º

---

## â° å®šæ—¶ä»»åŠ¡é…ç½®

### **æ–¹å¼ä¸€ï¼šGitHub Actionsï¼ˆæ¨èï¼‰**

**ä¼˜ç‚¹**ï¼š
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨è¿è¡Œ
- âœ… æœ‰æ—¥å¿—è®°å½•

**é…ç½®æ­¥éª¤**ï¼š

1. **æ·»åŠ  GitHub Secrets**
   
   åœ¨ä»“åº“ Settings > Secrets and variables > Actions ä¸­æ·»åŠ ï¼š
   
   ```
   SUPABASE_URL = ä½ çš„Supabase URL
   SUPABASE_ANON_KEY = ä½ çš„SupabaseåŒ¿åå¯†é’¥
   ```

2. **å¯ç”¨ Actions**
   
   - æ–‡ä»¶ï¼š`.github/workflows/daily-update.yml` å·²åˆ›å»º
   - æ¨é€åˆ° GitHub åè‡ªåŠ¨å¯ç”¨
   - æ¯å¤©åŒ—äº¬æ—¶é—´ 0:00 æ‰§è¡Œ

3. **æ‰‹åŠ¨è§¦å‘æµ‹è¯•**
   
   åœ¨ GitHub > Actions > æ¯æ—¥æ•°æ®æ›´æ–° > Run workflow

### **æ–¹å¼äºŒï¼šEdgeOne å®šæ—¶ä»»åŠ¡**

åœ¨ EdgeOne ç®¡ç†é¢æ¿é…ç½®ï¼š

```
è§¦å‘å™¨ç±»å‹ï¼šCron
Cron è¡¨è¾¾å¼ï¼š0 0 * * *
ç›®æ ‡ URLï¼šhttps://ä½ çš„åŸŸå/api/cron/daily-update
è¯·æ±‚æ–¹æ³•ï¼šGET
Headersï¼š
  Authorization: Bearer YOUR_CRON_SECRET
```

### **æ–¹å¼ä¸‰ï¼šæœ¬åœ° Cronï¼ˆLinux/Macï¼‰**

ç¼–è¾‘ crontabï¼š

```bash
crontab -e
```

æ·»åŠ ï¼š

```
0 0 * * * cd /path/to/ai-topic-radar && node scripts/crawl-and-save-daily.js >> /path/to/logs/daily-update.log 2>&1
```

---

## ğŸ§ª æœ¬åœ°æµ‹è¯•

### **æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–**

```bash
npm install @supabase/supabase-js
```

### **æ­¥éª¤ 2ï¼šè¿è¡Œæµ‹è¯•è„šæœ¬**

```bash
node scripts/test-update.js
```

### **æ­¥éª¤ 3ï¼šæŸ¥çœ‹è¾“å‡º**

æ­£å¸¸è¾“å‡ºåº”è¯¥åƒè¿™æ ·ï¼š

```
ğŸš€ å¼€å§‹æ¯æ—¥æ•°æ®æ›´æ–°ä»»åŠ¡
â°æ—¶é—´: 2025-10-16 00:00:00
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¡ ç¬¬ä¸€æ­¥ï¼šæŠ“å–æ•°æ®æº...

ğŸ“Œ å¤„ç†: ç™¾åº¦çƒ­æœ
   âœ… æŠ“å–æˆåŠŸï¼Œè·å¾— 10 æ¡æ–°é—»
   ğŸ—‘ï¸  æ¸…ç† baidu çš„æ—§æ•°æ®...
   âœ… æ—§æ•°æ®å·²æ¸…ç†
   âœ… æˆåŠŸæ’å…¥ 10 æ¡æ–°é—»

ğŸ“Œ å¤„ç†: 36æ°ª
   âœ… æŠ“å–æˆåŠŸï¼Œè·å¾— 3 æ¡æ–°é—»
   ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æ¯æ—¥æ›´æ–°å®Œæˆï¼
âœ… æˆåŠŸå¤„ç†: 50/50 æ¡æ–°é—»
ğŸ“… æ›´æ–°æ—¶é—´: 2025-10-16 00:00
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### **æ­¥éª¤ 4ï¼šéªŒè¯æ•°æ®åº“**

åœ¨ Supabase Dashboard æ£€æŸ¥ï¼š

```sql
SELECT platform_id, COUNT(*) 
FROM hot_news 
GROUP BY platform_id;
```

åº”è¯¥çœ‹åˆ° 8 ä¸ªå¹³å°éƒ½æœ‰æ•°æ®ã€‚

---

## ğŸ” æ•…éšœæ’æŸ¥

### **é—®é¢˜ 1ï¼šæ•°æ®æ²¡æœ‰æ›´æ–°**

**å¯èƒ½åŸå› **ï¼š
- âŒ Supabase é…ç½®é”™è¯¯
- âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥
- âŒ å®šæ—¶ä»»åŠ¡æœªå¯ç”¨

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š
   ```bash
   echo $SUPABASE_URL
   echo $SUPABASE_ANON_KEY
   ```

2. æŸ¥çœ‹æ—¥å¿—ï¼š
   ```bash
   cat scripts/daily-update.log
   ```

3. æ‰‹åŠ¨è¿è¡Œæµ‹è¯•ï¼š
   ```bash
   node scripts/test-update.js
   ```

### **é—®é¢˜ 2ï¼šé¦–é¡µç‚¹å‡»æ— ååº”**

**å¯èƒ½åŸå› **ï¼š
- âŒ API è¿”å›æ•°æ®ä¸ºç©º
- âŒ å‰ç«¯çŠ¶æ€ç®¡ç†é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š

1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æ£€æŸ¥ Network æ ‡ç­¾ï¼ŒæŸ¥çœ‹ `/api/hot-news` å“åº”
3. æ£€æŸ¥ Console æ ‡ç­¾ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### **é—®é¢˜ 3ï¼šçˆ¬è™«æŠ“å–å¤±è´¥**

**å¯èƒ½åŸå› **ï¼š
- âŒ ç›®æ ‡ç½‘ç«™åçˆ¬è™«
- âŒ ç½‘ç»œè¶…æ—¶

**è§£å†³æ–¹æ³•**ï¼š

ç›®å‰ä½¿ç”¨**ç¤ºä¾‹æ•°æ®**ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œç¡®ä¿æœåŠ¡ç¨³å®šï¼š
- ç™¾åº¦çƒ­æœï¼šå°è¯•çœŸå®æŠ“å–
- å…¶ä»–å¹³å°ï¼šä½¿ç”¨ç¤ºä¾‹æ•°æ®

---

## ğŸ“ ç»´æŠ¤å»ºè®®

1. **æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡**ï¼š
   - GitHub Actions è¿è¡ŒçŠ¶æ€
   - Supabase æ•°æ®åº“æ•°æ®é‡
   - æ—¥å¿—æ–‡ä»¶å¤§å°

2. **æ¯æœˆä¼˜åŒ–ä¸€æ¬¡**ï¼š
   - æ¸…ç†è¿‡æœŸæ—¥å¿—
   - æ£€æŸ¥çˆ¬è™«è„šæœ¬æ˜¯å¦éœ€è¦æ›´æ–°
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½

3. **ç›‘æ§æŒ‡æ ‡**ï¼š
   - å®šæ—¶ä»»åŠ¡æˆåŠŸç‡ > 95%
   - æ•°æ®åº“å“åº”æ—¶é—´ < 500ms
   - å‰ç«¯é¡µé¢åŠ è½½æ—¶é—´ < 2s

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤

```bash
# æµ‹è¯•æ•°æ®æ›´æ–°
npm run test:update

# æŸ¥çœ‹æ—¥å¿—
tail -f scripts/daily-update.log

# æ‰‹åŠ¨è§¦å‘æ›´æ–°
node scripts/crawl-and-save-daily.js

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
node -e "const {createClient}=require('@supabase/supabase-js');const s=createClient('URL','KEY');s.from('platforms').select('*').then(d=>console.log(d))"
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. GitHub Issues
2. Supabase æ–‡æ¡£ï¼šhttps://supabase.com/docs
3. é¡¹ç›® README.md

